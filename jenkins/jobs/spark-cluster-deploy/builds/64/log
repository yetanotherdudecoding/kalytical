Started by user [8mha:////4Nct9mT4JkcR2n6qL2qp2Se2jSWIXugywtK/9phaDtIgAAAAmB+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzuEgYe/dLi1CL9lPzk7NQiAErXYGvBAAAA[0mzzz@zzz.com
Building in workspace /var/jenkins_home/workspace/spark-cluster-deploy
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://zerodown524@bitbucket.org/zerodown524/kalytical.git # timeout=10
Fetching upstream changes from https://zerodown524@bitbucket.org/zerodown524/kalytical.git
 > git --version # timeout=10
using GIT_ASKPASS to set credentials 
 > git fetch --tags --progress https://zerodown524@bitbucket.org/zerodown524/kalytical.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/initial^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/initial^{commit} # timeout=10
Checking out Revision 15754c6e6273915554634ff65d429190d1194ba2 (refs/remotes/origin/initial)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 15754c6e6273915554634ff65d429190d1194ba2
Commit message: "try removing namespace??"
 > git rev-list --no-walk 15754c6e6273915554634ff65d429190d1194ba2 # timeout=10
[spark-cluster-deploy] $ docker build -t instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkmaster:64 --pull=true --file=spark/master/Dockerfile spark/master
Sending build context to Docker daemon  2.048kB
Step 1/1 : FROM gettyimages/spark:latest
Trying to pull repository docker.io/gettyimages/spark ... 
latest: Pulling from docker.io/gettyimages/spark
Digest: sha256:476fe6243bfd172064d7f71bd1d3679618f349e09941420848dde08c9fa6cf16
Status: Image is up to date for docker.io/gettyimages/spark:latest
 ---> 56107fdf8422
Successfully built 56107fdf8422
[spark-cluster-deploy] $ docker tag 56107fdf8422 instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkmaster:latest
[spark-cluster-deploy] $ docker inspect 56107fdf8422
[spark-cluster-deploy] $ docker push instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkmaster:64
The push refers to a repository [instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkmaster]
b499c54f8f4e: Preparing
fae276ab8af7: Preparing
158c017de1af: Preparing
9821ca65a1a8: Preparing
8d43435b20d7: Preparing
90d1009ce6fe: Preparing
90d1009ce6fe: Waiting
8d43435b20d7: Layer already exists
9821ca65a1a8: Layer already exists
158c017de1af: Layer already exists
fae276ab8af7: Layer already exists
b499c54f8f4e: Layer already exists
90d1009ce6fe: Layer already exists
64: digest: sha256:476fe6243bfd172064d7f71bd1d3679618f349e09941420848dde08c9fa6cf16 size: 1591
[spark-cluster-deploy] $ docker push instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkmaster:latest
The push refers to a repository [instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkmaster]
b499c54f8f4e: Preparing
fae276ab8af7: Preparing
158c017de1af: Preparing
9821ca65a1a8: Preparing
8d43435b20d7: Preparing
90d1009ce6fe: Preparing
90d1009ce6fe: Waiting
9821ca65a1a8: Layer already exists
fae276ab8af7: Layer already exists
8d43435b20d7: Layer already exists
158c017de1af: Layer already exists
b499c54f8f4e: Layer already exists
90d1009ce6fe: Layer already exists
latest: digest: sha256:476fe6243bfd172064d7f71bd1d3679618f349e09941420848dde08c9fa6cf16 size: 1591
[spark-cluster-deploy] $ docker build -t instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkworker:64 --pull=true --file=spark/worker/Dockerfile spark/worker
Sending build context to Docker daemon  4.608kB
Step 1/4 : FROM gettyimages/spark:latest
Trying to pull repository docker.io/gettyimages/spark ... 
latest: Pulling from docker.io/gettyimages/spark
Digest: sha256:476fe6243bfd172064d7f71bd1d3679618f349e09941420848dde08c9fa6cf16
Status: Image is up to date for docker.io/gettyimages/spark:latest
 ---> 56107fdf8422
Step 2/4 : COPY startWorker.sh startWorker.sh
 ---> Using cache
 ---> 092ad9f6f321
Step 3/4 : RUN chmod +x startWorker.sh
 ---> Using cache
 ---> f8857ac9126f
Step 4/4 : CMD /bin/bash ./startWorker.sh
 ---> Using cache
 ---> 728d8f7c67cc
Successfully built 728d8f7c67cc
[spark-cluster-deploy] $ docker tag 728d8f7c67cc instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkworker:latest
[spark-cluster-deploy] $ docker inspect 728d8f7c67cc
[spark-cluster-deploy] $ docker push instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkworker:64
The push refers to a repository [instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkworker]
cfcea9ec6d4c: Preparing
1856dfc241e5: Preparing
b499c54f8f4e: Preparing
fae276ab8af7: Preparing
158c017de1af: Preparing
9821ca65a1a8: Preparing
8d43435b20d7: Preparing
90d1009ce6fe: Preparing
9821ca65a1a8: Waiting
8d43435b20d7: Waiting
90d1009ce6fe: Waiting
b499c54f8f4e: Layer already exists
fae276ab8af7: Layer already exists
158c017de1af: Layer already exists
9821ca65a1a8: Layer already exists
8d43435b20d7: Layer already exists
90d1009ce6fe: Layer already exists
1856dfc241e5: Layer already exists
cfcea9ec6d4c: Layer already exists
64: digest: sha256:dd6b6db3becac2035fa468cea1672b91e506549cb9a28f7e25058a13bed96cf1 size: 2005
[spark-cluster-deploy] $ docker push instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkworker:latest
The push refers to a repository [instance-1.us-east1-b.c.sandbox-224519.internal:8080/sparkworker]
cfcea9ec6d4c: Preparing
1856dfc241e5: Preparing
b499c54f8f4e: Preparing
fae276ab8af7: Preparing
158c017de1af: Preparing
9821ca65a1a8: Preparing
8d43435b20d7: Preparing
90d1009ce6fe: Preparing
8d43435b20d7: Waiting
90d1009ce6fe: Waiting
9821ca65a1a8: Waiting
158c017de1af: Layer already exists
b499c54f8f4e: Layer already exists
cfcea9ec6d4c: Layer already exists
1856dfc241e5: Layer already exists
fae276ab8af7: Layer already exists
9821ca65a1a8: Layer already exists
90d1009ce6fe: Layer already exists
8d43435b20d7: Layer already exists
latest: digest: sha256:dd6b6db3becac2035fa468cea1672b91e506549cb9a28f7e25058a13bed96cf1 size: 2005
Starting Kubernetes deployment
Loading configuration: /var/jenkins_home/workspace/spark-cluster-deploy/spark/spark-cluster-deploy.yaml
ERROR: ERROR: io.fabric8.kubernetes.client.KubernetesClientException: Operation: [get]  for kind: [Service]  with name: [spark-cluster-01-spark-master]  in namespace: [bsavoy]  failed.
hudson.remoting.ProxyException: io.fabric8.kubernetes.client.KubernetesClientException: Operation: [get]  for kind: [Service]  with name: [spark-cluster-01-spark-master]  in namespace: [bsavoy]  failed.
	at io.fabric8.kubernetes.client.KubernetesClientException.launderThrowable(KubernetesClientException.java:62)
	at io.fabric8.kubernetes.client.KubernetesClientException.launderThrowable(KubernetesClientException.java:71)
	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.getMandatory(BaseOperation.java:206)
	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.get(BaseOperation.java:162)
	at com.microsoft.jenkins.kubernetes.KubernetesClientWrapper$ServiceUpdater.getCurrentResource(KubernetesClientWrapper.java:446)
	at com.microsoft.jenkins.kubernetes.KubernetesClientWrapper$ServiceUpdater.getCurrentResource(KubernetesClientWrapper.java:435)
	at com.microsoft.jenkins.kubernetes.KubernetesClientWrapper$ResourceUpdater.createOrApply(KubernetesClientWrapper.java:358)
	at com.microsoft.jenkins.kubernetes.KubernetesClientWrapper.apply(KubernetesClientWrapper.java:160)
	at com.microsoft.jenkins.kubernetes.command.DeploymentCommand$DeploymentTask.doCall(DeploymentCommand.java:168)
	at com.microsoft.jenkins.kubernetes.command.DeploymentCommand$DeploymentTask.call(DeploymentCommand.java:122)
	at com.microsoft.jenkins.kubernetes.command.DeploymentCommand$DeploymentTask.call(DeploymentCommand.java:105)
	at hudson.FilePath.act(FilePath.java:1165)
	at com.microsoft.jenkins.kubernetes.command.DeploymentCommand.execute(DeploymentCommand.java:67)
	at com.microsoft.jenkins.kubernetes.command.DeploymentCommand.execute(DeploymentCommand.java:46)
	at com.microsoft.jenkins.azurecommons.command.CommandService.runCommand(CommandService.java:88)
	at com.microsoft.jenkins.azurecommons.command.CommandService.execute(CommandService.java:96)
	at com.microsoft.jenkins.azurecommons.command.CommandService.executeCommands(CommandService.java:75)
	at com.microsoft.jenkins.azurecommons.command.BaseCommandContext.executeCommands(BaseCommandContext.java:77)
	at com.microsoft.jenkins.kubernetes.KubernetesDeploy.perform(KubernetesDeploy.java:42)
	at hudson.tasks.BuildStepCompatibilityLayer.perform(BuildStepCompatibilityLayer.java:81)
	at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:20)
	at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:744)
	at hudson.model.Build$BuildExecution.build(Build.java:206)
	at hudson.model.Build$BuildExecution.doRun(Build.java:163)
	at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:504)
	at hudson.model.Run.execute(Run.java:1810)
	at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)
	at hudson.model.ResourceController.execute(ResourceController.java:97)
	at hudson.model.Executor.run(Executor.java:429)
Caused by: hudson.remoting.ProxyException: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: signature check failed
	at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
	at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1964)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:328)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:322)
	at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1633)
	at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)
	at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1052)
	at sun.security.ssl.Handshaker.process_record(Handshaker.java:987)
	at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1072)
	at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)
	at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)
	at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)
	at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.java:299)
	at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.java:268)
	at okhttp3.internal.connection.RealConnection.connect(RealConnection.java:160)
	at okhttp3.internal.connection.StreamAllocation.findConnection(StreamAllocation.java:256)
	at okhttp3.internal.connection.StreamAllocation.findHealthyConnection(StreamAllocation.java:134)
	at okhttp3.internal.connection.StreamAllocation.newStream(StreamAllocation.java:113)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:42)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:125)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)
	at io.fabric8.kubernetes.client.utils.ImpersonatorInterceptor.intercept(ImpersonatorInterceptor.java:54)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)
	at io.fabric8.kubernetes.client.utils.HttpClientUtils$2.intercept(HttpClientUtils.java:95)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:200)
	at okhttp3.RealCall.execute(RealCall.java:77)
	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:379)
	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:344)
	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleGet(OperationSupport.java:313)
	at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleGet(OperationSupport.java:296)
	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleGet(BaseOperation.java:770)
	at io.fabric8.kubernetes.client.dsl.base.BaseOperation.getMandatory(BaseOperation.java:195)
	... 26 more
Caused by: hudson.remoting.ProxyException: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: signature check failed
	at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:362)
	at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:270)
	at sun.security.validator.Validator.validate(Validator.java:262)
	at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)
	at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)
	at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:124)
	at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1615)
	... 64 more
Caused by: hudson.remoting.ProxyException: java.security.cert.CertPathValidatorException: signature check failed
	at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)
	at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:233)
	at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:141)
	at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:80)
	at java.security.cert.CertPathValidator.validate(CertPathValidator.java:292)
	at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:357)
	... 70 more
Caused by: hudson.remoting.ProxyException: java.security.SignatureException: Signature does not match.
	at sun.security.x509.X509CertImpl.verify(X509CertImpl.java:449)
	at sun.security.provider.certpath.BasicChecker.verifySignature(BasicChecker.java:166)
	at sun.security.provider.certpath.BasicChecker.check(BasicChecker.java:147)
	at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)
	... 75 more
ERROR: Kubernetes deployment ended with HasError
Finished: FAILURE
